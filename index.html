<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits h1{font-size:24pt;margin-bottom:10pt}.credits-container{display:flex;flex-direction:row}.credits-names-column{margin-right:24pt}.credits-name,.credits-roles{font-size:20pt;margin-top:0;margin-bottom:5pt}.credits button{margin-top:10pt;font-size:20pt}.world-screen-header{display:flex;flex-direction:row;margin:0;min-height:60px}.world-screen-quest-description{font-size:16px;padding-right:10px;padding-top:0;padding-bottom:0}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;margin:20px;font-size:16px}.world-screen-inventory{width:20%;margin:10px;font-size:16px}.production-screen{padding-left:10pt}.production-screen-label{font-size:20pt}.production-screen-inventory{font-size:16pt;line-height:0;padding:1pt;outline:solid #fff;width:50%}.conversion-description{font-size:16pt;width:50%;text-align:left}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.production-screen-back-button{font-size:20pt;margin-top:20pt}:root,button{background-color:#000;color:#fff;font-family:monospace}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,h){a!=Array.prototype&&a!=Object.prototype&&(a[b]=h.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(h){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(h||"")+"_"+b++,h)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,h=[];!(b=a.next()).done;)h.push(b.value);return h};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(h){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var h=$jscomp.setPrototypeOf;h(a,b)}else for(h in b)if("prototype"!=h)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,h);e&&Object.defineProperty(a,h,e)}else a[h]=b[h];a.superClass_=b.prototype};
$jscomp.polyfill=function(a,b,h,e){if(b){h=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in h||(h[f]={});h=h[f]}a=a[a.length-1];e=h[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(h,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Math.hypot",function(a){return a?a:function(a){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var b,e,f;for(b=f=0;b<arguments.length;b++)f=Math.max(f,Math.abs(arguments[b]));if(1e+100<f||1e-100>f){if(!f)return f;for(b=e=0;b<arguments.length;b++){var n=Number(arguments[b])/f;e+=n*n}return Math.sqrt(e)*f}for(b=e=0;b<arguments.length;b++)n=Number(arguments[b]),e+=n*n;return Math.sqrt(e)}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function h(a){return a instanceof f?a:new f(function(c,b){c(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(r){c.reject(r)}};f.prototype.createResolveAndReject_=function(){function a(a){return function(k){b||(b=!0,a.call(c,k))}}var c=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(r){this.reject_(r);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)n.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var n=new b;f.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};f.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(k){b.reject(k)}};f.prototype.then=function(a,c){function b(a,c){return"function"==typeof a?function(c){try{k(a(c))}catch(U){e(U)}}:c}var k,e,h=new f(function(a,c){k=a;e=c});this.callWhenSettled_(b(a,k),b(c,e));return h};
f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(a,c){function b(){switch(k.state_){case 1:a(k.result_);break;case 2:c(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=this;null==this.onSettledCallbacks_?n.asyncExecute(b):this.onSettledCallbacks_.push(b)};f.resolve=h;f.reject=function(a){return new f(function(c,b){b(a)})};f.race=function(a){return new f(function(c,b){for(var k=$jscomp.makeIterator(a),e=k.next();!e.done;e=k.next())h(e.value).callWhenSettled_(c,
b)})};f.all=function(a){var c=$jscomp.makeIterator(a),b=c.next();return b.done?h([]):new f(function(a,e){function k(c){return function(b){f[c]=b;r--;0==r&&a(f)}}var f=[],r=0;do f.push(void 0),r++,h(b.value).callWhenSettled_(k(f.length-1),e),b=c.next();while(!b.done)})};return f},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var h=0,e={next:function(){if(h<a.length){var f=h++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(h,e,f){return h==a&&"q"==e&&f==b}}));return!0===b.q}catch(h){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var c=Object.seal({}),b=Object.seal({}),e=new a([[c,2],[b,3]]);if(2!=e.get(c)||3!=e.get(b))return!1;e.delete(c);e.set(b,4);return!e.has(c)&&4==e.get(b)}catch(T){return!1}}function h(){}function e(a){var c=typeof a;return"object"===c&&null!==a||"function"===c}function f(a){if(!$jscomp.owns(a,m)){var c=new h;$jscomp.defineProperty(a,m,{value:c})}}function n(a){var c=Object[a];c&&(Object[a]=function(a){if(a instanceof
h)return a;f(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var m="$jscomp_hidden_"+Math.random();n("freeze");n("preventExtensions");n("seal");var c=0,r=function(a){this.id_=(c+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};r.prototype.set=function(a,c){if(!e(a))throw Error("Invalid WeakMap key");f(a);if(!$jscomp.owns(a,m))throw Error("WeakMap key fail: "+
a);a[m][this.id_]=c;return this};r.prototype.get=function(a){return e(a)&&$jscomp.owns(a,m)?a[m][this.id_]:void 0};r.prototype.has=function(a){return e(a)&&$jscomp.owns(a,m)&&$jscomp.owns(a[m],this.id_)};r.prototype.delete=function(a){return e(a)&&$jscomp.owns(a,m)&&$jscomp.owns(a[m],this.id_)?delete a[m][this.id_]:!1};return r},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),b=new a($jscomp.makeIterator([[c,"s"]]));if("s"!=b.get(c)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var e=b.entries(),f=e.next();if(f.done||f.value[0]!=c||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!e.next().done?!1:!0}catch(T){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var h=new WeakMap,e=function(a){this.data_={};this.head_=m();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};e.prototype.set=function(a,c){a=0===a?0:a;var b=f(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=c:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:c},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};e.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=m();this.size=0};e.prototype.has=function(a){return!!f(this,a).entry};
e.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};e.prototype.entries=function(){return n(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return n(this,function(a){return a.key})};e.prototype.values=function(){return n(this,function(a){return a.value})};e.prototype.forEach=function(a,c){for(var b=this.entries(),e;!(e=b.next()).done;)e=e.value,a.call(c,e[1],e[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var f=function(a,b){var e=b&&typeof b;"object"==
e||"function"==e?h.has(b)?e=h.get(b):(e=""+ ++c,h.set(b,e)):e="p_"+b;var f=a.data_[e];if(f&&$jscomp.owns(a.data_,e))for(a=0;a<f.length;a++){var k=f[a];if(b!==b&&k.key!==k.key||b===k.key)return{id:e,list:f,index:a,entry:k}}return{id:e,list:f,index:-1,entry:void 0}},n=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},m=function(){var a={};return a.previous=
a.next=a.head=a},c=0;return e},"es6","es3");$jscomp.polyfill("Array.from",function(a){return a?a:function(a,h,e){h=null!=h?h:function(a){return a};var b=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof n){a=n.call(a);for(var m=0;!(n=a.next()).done;)b.push(h.call(e,n.value,m++))}else for(n=a.length,m=0;m<n;m++)b.push(h.call(e,a[m],m));return b}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,h){return h})}},"es8","es3");
(function(a){function b(e){if(h[e])return h[e].exports;var f=h[e]={i:e,l:!1,exports:{}};a[e].call(f.exports,f,f.exports,b);f.l=!0;return f.exports}var h={};b.m=a;b.c=h;b.d=function(a,f,h){b.o(a,f)||Object.defineProperty(a,f,{enumerable:!0,get:h})};b.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(a,"__esModule",{value:!0})};b.t=function(a,
f){f&1&&(a=b(a));if(f&8||f&4&&"object"===typeof a&&a&&a.__esModule)return a;var e=Object.create(null);b.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:a});if(f&2&&"string"!=typeof a)for(var h in a)b.d(e,h,function(c){return a[c]}.bind(null,h));return e};b.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(e,"a",e);return e};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=1)})([,function(a,b,h){function e(d,
a,b){return Math.max(Math.min(a,b),d)}function f(d){var a=new Image,b=new Promise(function(g,b){a.onload=function(){return g(a)};a.onerror=function(){return g(a)};a.src=d});Y.push(b);return a}function n(d,a){var g=new O(d,a);d=window;d.cheatsAddResource=function(d,a){return g.addResource(d,a)};d.cheatsAddPopulation=function(d,a){return g.addPopulation(d,a)};Object.freeze(l);Object.freeze(w);d.Resources=l;d.Species=w}function m(){var d=window;d.cheats=void 0;d.Resources=void 0;d.Species=void 0}h.r(b);
var c=function(){};c.makeDiv=function(d){var a=document.createElement("div");d&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(d));return a};c.makeDivContaining=function(d,a){a=this.makeDiv(a);d=$jscomp.makeIterator(d);for(var g=d.next();!g.done;g=d.next())a.appendChild(g.value);return a};c.makeElement=function(d,a,b){d=document.createElement(d);d.innerText=a;b&&d.classList.add.apply(d.classList,$jscomp.arrayFromIterable(b));return d};c.makePara=function(d,a){return c.makeElement("p",
d,a)};c.makeHeader=function(d,a,b){return c.makeElement("h"+(void 0===a?1:a),d,b)};c.makeButton=function(d,a,b,c){c=void 0===c?!1:c;var g=document.createElement("button");g.type="button";g.disabled=c;g.innerText=d;b&&g.classList.add.apply(g.classList,$jscomp.arrayFromIterable(b));g.onclick=function(d){d.preventDefault;a.call(this,d)};return g};c.makeCanvas=function(d,a,b){var g=document.createElement("canvas");g.width=d;g.height=a;b&&g.classList.add.apply(g.classList,$jscomp.arrayFromIterable(b));
return g};c.fillHTML=function(d,a){d.innerHTML="";a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())d.appendChild(g.value)};var r=function(){};r.renderMainMenu=function(){return c.makeDivContaining([c.makeHeader("Aurora",1),c.makeDivContaining([c.makeButton("start_game",function(){return t.startGame()}),c.makeButton("display_credits",function(){return t.showCredits()})],["main-menu-options"])],["main-menu"])};var k=function(d,a){this.x=d;this.y=a};k.prototype.toString=function(){return"("+
this.x+", "+this.y+")"};k.prototype.distanceFrom=function(d){return Math.hypot(Math.abs(this.x-d.x),Math.abs(this.y-d.y))};var Y=[];a=f("assets/ui/highlight.png");var da=f("assets/tiles/habitat.png"),T=f("assets/tiles/wasteland.png"),ba=f("assets/tiles/solar_panels.png"),ca=f("assets/tiles/mountain.png"),U=f("assets/tiles/mining_facility.png"),ea=f("assets/tiles/lander.png"),p=function(d,a){var g=this;this.viewWidth=12;this.viewHeight=8;this.viewPosition=new k(0,0);this.highlightedCoordinates=null;
this.world=a;this.parentScreen=d;this.canvas=c.makeCanvas(this.viewWidth*p.pixelsPerTile,this.viewHeight*p.pixelsPerTile,["map-canvas"]);this.canvas.addEventListener("click",function(d){return g.handleClick(d)});this.refreshViewableArea()};p.prototype.getViewCanvas=function(){return this.canvas};p.prototype.refreshViewableArea=function(){var d=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);d=$jscomp.makeIterator(d);for(var a=d.next();!a.done;a=
d.next())this.rerenderTile(a.value)};p.prototype.drawSquareAtCoordinates=function(d,a){var g=this.canvas.getContext("2d");g.imageSmoothingEnabled=!1;var b=a.x-this.viewPosition.x;a=a.y-this.viewPosition.y;0>b||0>a||b>=this.viewWidth||a>=this.viewHeight||g.drawImage(d,b*p.pixelsPerTile,a*p.pixelsPerTile,p.pixelsPerTile,p.pixelsPerTile)};p.prototype.rerenderTile=function(d){this.drawSquareAtCoordinates(d.texture,d.position);d.position===this.highlightedCoordinates&&this.drawSquareAtCoordinates(p.highlightImage,
d.position)};p.prototype.selectTile=function(d){if(!d||d.position!==this.highlightedCoordinates){if(this.highlightedCoordinates){var a=this.world.getTileAtCoordinates(this.highlightedCoordinates);this.highlightedCoordinates=null;this.rerenderTile(a)}d?(this.drawSquareAtCoordinates(p.highlightImage,d.position),this.highlightedCoordinates=d.position):this.highlightedCoordinates=null;this.parentScreen.changeSidebarTile(this.highlightedCoordinates)}};p.prototype.moveViewArea=function(d,a){var g=this.viewPosition.x,
b=this.viewPosition.y;d=e(0,this.viewPosition.x+d,this.world.width-this.viewWidth);a=e(0,this.viewPosition.y+a,this.world.height-this.viewHeight);this.viewPosition=new k(d,a);d=this.viewPosition.x-g;a=this.viewPosition.y-b;g=d*p.pixelsPerTile*-1;b=a*p.pixelsPerTile*-1;this.canvas.getContext("2d").drawImage(this.canvas,g,b);if(0<d)for(g=this.world.getTilesInRectangle(this.viewPosition.x+this.viewWidth-d,this.viewPosition.y,d,this.viewHeight),b=$jscomp.makeIterator(g),g=b.next();!g.done;g=b.next())this.rerenderTile(g.value);
if(0>d)for(d=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,-1*d,this.viewHeight),d=$jscomp.makeIterator(d),g=d.next();!g.done;g=d.next())this.rerenderTile(g.value);if(0<a)for(d=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y+this.viewHeight-a,this.viewWidth,a),d=$jscomp.makeIterator(d),g=d.next();!g.done;g=d.next())this.rerenderTile(g.value);if(0>a)for(a=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,-1*a),a=$jscomp.makeIterator(a),
g=a.next();!g.done;g=a.next())this.rerenderTile(g.value)};p.prototype.handleClick=function(d){d=this.world.getTileAtCoordinates(new k(Math.floor(this.viewWidth/this.canvas.clientWidth*(d.pageX-this.canvas.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/this.canvas.clientHeight*(d.pageY-this.canvas.offsetTop))+this.viewPosition.y));this.selectTile(d)};p.prototype.handleKeyDown=function(d){d=d.code;"ArrowUp"!==d&&"KeyW"!==d||this.moveViewArea(0,-1);"ArrowLeft"!==d&&"KeyA"!==d||this.moveViewArea(-1,
0);"ArrowDown"!==d&&"KeyS"!==d||this.moveViewArea(0,1);"ArrowRight"!==d&&"KeyD"!==d||this.moveViewArea(1,0)};p.pixelsPerTile=64;p.highlightImage=a;var E=function(d,a){this.parentScreen=d;this.run=a;this.position=null;this.html=c.makeDiv(["world-screen-sidebar"]);this.refresh()};E.prototype.getHTML=function(){return this.html};E.prototype.changeTile=function(d){this.position=d;this.refresh()};E.prototype.refresh=function(){if(null==this.position)c.fillHTML(this.html,[c.makePara("No structure or terrain tile selected")]);
else{var d=this.run.world.getTileAtCoordinates(this.position),a=c.makeDiv();d.populationCapacity&&a.appendChild(c.makePara("Population capacity for "+d.populationCapacity.capacity+" "+d.populationCapacity.species.name));var b=c.makeDiv();if(0<d.possibleProjects.length){b.appendChild(c.makePara("Projects:"));for(var e=$jscomp.makeIterator(d.possibleProjects),f=e.next();!f.done;f=e.next())b.appendChild(this.makeProjectHTML(d,f.value))}e=c.makeDiv();if(0<d.resourceConversions.length){e.appendChild(c.makePara("Production:"));
f=$jscomp.makeIterator(d.resourceConversions);for(var h=f.next();!h.done;h=f.next())e.appendChild(this.makeConversionHTML(h.value))}c.fillHTML(this.html,[c.makePara(d.getTileName()),c.makePara("Coordinates: "+this.position.x+", "+this.position.y),a,b,e])}};E.prototype.makeProjectHTML=function(d,a){var g=this,b=c.makeDiv(),e=!a.canDo(d.position,this.run);e=c.makeButton(a.title,function(){g.doProject(a,d)},[],e);b.appendChild(e);0==a.costs.length?b.appendChild(c.makePara("Cost: Free")):(e="Cost: "+
a.costs.map(function(a){return""+a.toString()}).join(", "),b.appendChild(c.makePara(e)));0<a.completionRequirements.length&&(e=a.completionRequirements.map(function(a){return"- "+a.toString()+"\n"}).join(""),b.appendChild(c.makePara("Requirements:\n"+e)));return b};E.prototype.makeConversionHTML=function(a){return c.makePara("- "+a.toString())};E.prototype.doProject=function(a,g){a.doAction(g.position,this.run);this.run.updateQuestState();this.parentScreen.refreshComponents()};var V=function(a){this.inventory=
a.inventory;this.html=c.makeDiv(["world-screen-inventory"]);this.refresh()};V.prototype.getHTML=function(){return this.html};V.prototype.refresh=function(){for(var a=c.makeHeader("Population: "+this.inventory.getTotalPopulation(),1),g=c.makePara("Available workers: "+this.inventory.getAvailableWorkers()),b=c.makeDiv(),e=$jscomp.makeIterator(this.inventory.getPopulationStrings()),f=e.next();!f.done;f=e.next())b.appendChild(c.makePara(f.value));e=c.makeDiv();var h=$jscomp.makeIterator(this.inventory.getInventoryStrings());
for(f=h.next();!f.done;f=h.next())e.appendChild(c.makePara(f.value));c.fillHTML(this.html,[c.makeDivContaining([a,g,b,c.makeHeader("Inventory:",1),e])])};var W=function(a){this.html=c.makeDiv(["world-screen-header"]);this.run=a;this.refresh()};W.prototype.refresh=function(){var a=this,g=c.makeButton("Quit Game",function(){t.showMainMenu()}),b=c.makeButton("Next Turn",function(){t.transitionToNextTurn()}),e=c.makeButton("Manage Production",function(){t.showProductionScreen()}),f=this.run.getCurrentQuestHint(),
h=this.run.getCurrentQuestDescription();f=c.makePara("Objective: "+(f?h+"\n(hint: "+f+")":h),["world-screen-quest-description"]);h=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(f=c.makePara("Completed: "+h,["world-screen-quest-description","quest-description-emphasis"]),setTimeout(function(){a.refresh()},1500));this.run.questCompletionShown=!0;c.fillHTML(this.html,[g,e,b,f])};W.prototype.getHTML=function(){return this.html};var L=function(a){this.mapUI=new p(this,a.world);
this.tileSidebar=new E(this,a);var d=this.mapUI.getViewCanvas();this.inventorySidebar=new V(a);var b=this.tileSidebar.getHTML(),e=this.inventorySidebar.getHTML();this.header=new W(a);this.worldScreenHTML=c.makeDivContaining([this.header.getHTML(),c.makeDivContaining([e,c.makeDivContaining([d],["world-screen-map-box"]),b],["world-screen-hbox"])],["flex-vertical"])};L.prototype.getHTML=function(){return this.worldScreenHTML};L.prototype.refreshComponents=function(){this.mapUI.refreshViewableArea();
this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh()};L.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};L.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var P=function(){};P.generate=function(a,g){for(var d=Array(a),b=0;b<a;b++)d[b]=g();return d};P.flatten=function(a){return a.reduce(function(a,d){a=void 0===a?[]:a;return a.concat(d)})};var v=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=
void 0},F=function(a,g,b,c){this.title=a;this.action=g;this.costs=b;this.completionRequirements=c};F.prototype.canDo=function(a,g){return g.inventory.canAfford(this.costs)&&this.completionRequirements.every(function(d){return d.evaluate(g,a)})};F.prototype.doAction=function(a,g){if(!this.canDo(a,g))throw"tried to do project "+this.title+" without meeting requirements";g.inventory.payCost(this.costs);this.action(a,g)};var w=function(a,g){this.name=a;this.growthMultiplier=g};w.values=function(){return Object.keys(w).map(function(a){return w[a]})};
w.Human=new w("Human Colonists",.1);w.Robot=new w("Robotic Platform",1);var fa=function(a,g){this.species=a;this.capacity=g},y=function(a){a=v.call(this,a)||this;a.texture=da;a.populationCapacity=new fa(w.Human,200);return a};$jscomp.inherits(y,v);y.prototype.getTileName=function(){return y.tileName};y.tileName="Habitat Dome";var x=function(a,g){this.resource=a;this.quantity=g};x.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var l=function(a){this.name=a};l.values=function(){return Object.keys(l).map(function(a){return l[a]})};
l.Energy=new l("Energy");l.Metal=new l("Metal Ore");l.BuildingMaterials=new l("Construction Materials");l.Electronics=new l("Electronics");var M=function(a,g){this.radius=a;this.targetType=g;return this};$jscomp.inherits(M,function(){});M.prototype.evaluate=function(a,g){var d=this;return 0<a.world.getTilesInCircle(g,this.radius).filter(function(a){return a instanceof d.targetType}).length};M.prototype.toString=function(){return 1==this.radius?"adjacent to a "+this.targetType.tileName:"within "+this.radius+
" units of a "+this.targetType.tileName};var C=function(a,g,b){this.inputs=a;this.outputs=g;this.enabled=!0;this.requiredWorkers=b||0;this.isFree()?this.priority=0:(this.priority=C.nextNumber,C.nextNumber++)};C.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),g="Produce "+a;0<this.inputs.length&&(g="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!=this.requiredWorkers&&(g+=" using "+this.requiredWorkers+" workers");
return g};C.prototype.isFree=function(){return 0==this.inputs.length&&!this.requiredWorkers};C.nextNumber=1;var J=function(a){a=v.call(this,a)||this;a.texture=U;a.resourceConversions=[new C([new x(l.Metal,100)],[new x(l.BuildingMaterials,100)],60),new C([new x(l.Metal,100)],[new x(l.Electronics,100)],30)];return a};$jscomp.inherits(J,v);J.prototype.getTileName=function(){return J.tileName};J.tileName="Ore Processing Center";var A=function(a){a=v.call(this,a)||this;a.texture=ca;a.possibleProjects=
[new F("Strip Mining",function(a,d){d.inventory.addResource(l.Metal,150);d.world.placeTile(new u(a))},[new x(l.Energy,25)],[])];return a};$jscomp.inherits(A,v);A.prototype.getTileName=function(){return A.tileName};A.tileName="Mountain";var G=function(a){a=v.call(this,a)||this;a.texture=ba;a.resourceConversions=[new C([],[new x(l.Energy,100)])];return a};$jscomp.inherits(G,v);G.prototype.getTileName=function(){return G.tileName};G.tileName="Photovoltaic Array";var u=function(a){a=v.call(this,a)||this;
a.texture=T;a.possibleProjects=[new F("Construct habitat dome",function(a,d){d.world.placeTile(new y(a))},[new x(l.BuildingMaterials,100)],[new M(1,y)]),new F("Construct ore processing center",function(a,d){d.world.placeTile(new J(a))},[new x(l.Energy,200),new x(l.Metal,300)],[new M(5,A)]),new F("Construct photovoltaic array",function(a,d){d.world.placeTile(new G(a))},[new x(l.Electronics,200)],[])];return a};$jscomp.inherits(u,v);u.prototype.getTileName=function(){return u.tileName};u.tileName="Wasteland";
var H=function(){};H.realBetween=function(a,g){return Math.random()*(g-a)+a};H.intBetween=function(a,g){return Math.floor(H.realBetween(a,g))};H.fromArray=function(a){return a[H.intBetween(0,a.length)]};var I=function(a){this.width=a.worldWidth;this.height=a.worldHeight;this.grid=Array(this.height);for(var d=0;d<this.height;d++){this.grid[d]=Array(this.width);for(var b=0;b<this.width;b++)this.grid[d][b]=new u(new k(b,d))}d=H.intBetween(a.minMountains,a.maxMountains);for(b=0;b<d;b++){var c=this.getTiles().filter(function(a){return a instanceof
u});c=H.fromArray(c).position;this.placeTile(new A(c))}a=$jscomp.makeIterator(a.nonrandomTiles);for(d=a.next();!d.done;d=a.next())this.placeTile(d.value)};I.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};I.prototype.getTiles=function(){return P.flatten(this.grid)};I.prototype.getTilesInRectangle=function(a,b,c,e){0>b&&(b=0);0>a&&(a=0);var d=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+c);e=$jscomp.makeIterator(e);
for(var g=e.next();!g.done;g=e.next())d.push(g.value)}return d};I.prototype.getTileAtCoordinates=function(a){return this.grid[a.y][a.x]};I.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(d){return a.distanceFrom(d.position)<=b})};I.prototype.getPopulationCapacity=function(a){for(var d=0,b=$jscomp.makeIterator(this.getTiles()),c=b.next();!c.done;c=b.next())c=c.value,c.populationCapacity&&c.populationCapacity.species==a&&(d+=c.populationCapacity.capacity);return d};var z=
function(){this.map=new Map([])};z.prototype.add=function(a,b){this.set(a,this.get(a)+b)};z.prototype.remove=function(a,b){this.add(a,-1*b)};z.prototype.get=function(a){return this.map.get(a)||0};z.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0==b?this.map.delete(a):this.map.set(a,b)};z.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};z.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};
z.prototype.clone=function(){for(var a=new z,b=$jscomp.makeIterator(this.positiveQuantityKeys()),c=b.next();!c.done;c=b.next())c=c.value,a.add(c,this.get(c));return a};var q=function(a){this.world=a;this.resourceQuantities=new z;this.populationQuantities=new z;this.availableWorkers=0};q.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};q.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};q.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||
0};q.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,e(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};q.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};q.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};q.prototype.doPopulationGrowth=function(){for(var a=
$jscomp.makeIterator(this.populationQuantities.positiveQuantityKeys()),b=a.next();!b.done;b=a.next()){b=b.value;var c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,c)}};q.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};q.prototype.getAvailableWorkers=function(){return this.availableWorkers};q.prototype.canAfford=function(a){var b=this,d=new Map;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,d.set(c.resource,
c.quantity+(d.get(c.resource)||0));return Array.from(d.keys()).every(function(a){var c=d.get(a);a=b.getResourceQuantity(a);return c<=a})};q.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};q.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};q.prototype.getResourceList=function(){return this.resourceQuantities.positiveQuantityKeys()};
q.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};q.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};q.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&
b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var d=b.next();!d.done;d=b.next())d=d.value,this.addResource(d.resource,d.quantity)}};q.prototype.clone=function(){var a=new q(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var K=function(a){a=v.call(this,a)||this;a.texture=ea;a.possibleProjects=[new F("Unpack Lander",
function(a,b){var d=b.world;d.placeTile(new y(new k(a.x+1,a.y)));d.placeTile(new J(new k(a.x,a.y-1)));d.placeTile(new G(new k(a.x+1,a.y-1)));d.placeTile(new u(a));b.inventory.addWorkers(w.Human,100)},[],[])];return a};$jscomp.inherits(K,v);K.prototype.getTileName=function(){return K.tileName};K.tileName="Landing Pod";var X=function(a,b,c,e,f){this.nonrandomTiles=a;this.worldWidth=b;this.worldHeight=c;this.minMountains=e;this.maxMountains=f};X.standardWorldParameters=function(){var a=[new A(new k(0,
0)),new A(new k(1,0)),new A(new k(2,0)),new u(new k(0,1)),new u(new k(1,1)),new u(new k(2,1)),new u(new k(0,2)),new K(new k(1,2)),new u(new k(2,2)),new u(new k(0,3)),new u(new k(1,3)),new u(new k(2,4))];return new X(a,20,20,20,25)};a=function(a,b){this.requirement=a;this.nextStage=b};b=function(a,b,c,e){this.description=a;this.hint=b;this.paths=c;this.isWinState=void 0===e?!1:e};b.prototype.updatedStage=function(a){for(var b=$jscomp.makeIterator(this.paths),d=b.next();!d.done;d=b.next())if(d=d.value,
d.requirement.evaluate(a))return d.nextStage().updatedStage(a);return this};h=function(){};var N=function(a,b){this.resource=a;this.minQuantity=b;return this};$jscomp.inherits(N,h);N.prototype.evaluate=function(a){return a.inventory.getResourceQuantity(this.resource)>=this.minQuantity};N.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};var Q=function(a,b){this.tileType=a;this.minQuantity=b;return this};$jscomp.inherits(Q,h);Q.prototype.evaluate=
function(a){var b=this;return a.world.getTiles().filter(function(a){return a instanceof b.tileType}).length>=this.minQuantity};Q.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1==this.minQuantity?"":"s")};var R=function(a){this.minimumPopulation=a;return this};$jscomp.inherits(R,h);R.prototype.evaluate=function(a){return a.inventory.getTotalPopulation()>=this.minimumPopulation};R.prototype.toString=function(){return"have a total population of at least "+
this.minimumPopulation};var ia=new b("Deploy shelter for the colonists","select the "+K.tileName,[new a(new Q(y,1),function(){return ha})]),ha=new b("Build up at least 100 units of "+l.Energy.name,"the "+G.tileName+" produces "+l.Energy.name+" each turn",[new a(new N(l.Energy,100),function(){return ja})]),ja=new b("Acquire "+l.Metal.name,void 0,[new a(new N(l.Metal,1),function(){return ka})]),ka=new b("Grow total worker population to 250","A "+y.tileName+" has capacity for "+(new y(new k(0,0))).populationCapacity.capacity+
" colonists",[new a(new R(250),function(){return la})]),la=new b("[no current objective]",void 0,[]),B=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=!0;this.world=new I(X.standardWorldParameters());this.inventory=new q(this.world);this.questStage=ia};B.prototype.getCurrentQuestDescription=function(){return this.questStage.description};B.prototype.getCurrentQuestHint=function(){return this.questStage.hint};B.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};
B.prototype.getResourceConversions=function(){var a=P.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}));a.sort(function(a,b){return a.priority-b.priority});return a};B.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!=this.questStage&&(this.prevQuestDescription=this.questStage.description,this.questCompletionShown=!1,this.questStage=a)};B.prototype.completeTurn=function(){this.inventory.applyConversions(this.getResourceConversions());this.inventory.releaseWorkers();
this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};B.prototype.increaseConversionPriority=function(a){if(0!=a.priority){var b=this.getResourceConversions(),d=b.indexOf(a);-1!=d&&0!=d&&(b=b[d-1],0!=b.priority&&(d=$jscomp.makeIterator([b.priority,a.priority]),a.priority=d.next().value,b.priority=d.next().value))}};B.prototype.decreaseConversionPriority=function(a){if(0!=a.priority){var b=this.getResourceConversions(),d=b.indexOf(a);-1!=d&&d!=b.length-1&&(b=b[d+1],d=$jscomp.makeIterator([b.priority,
a.priority]),a.priority=d.next().value,b.priority=d.next().value)}};var O=function(a,b){this.currentGame=a;this.worldScreen=b};O.prototype.refresh=function(){this.currentGame.updateQuestState();this.worldScreen.refreshComponents()};O.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,b);this.refresh()};O.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,b);this.refresh()};var S=function(){this.html=c.makeDiv();c.fillHTML(this.html,[c.makePara("Loading...")])};
S.prototype.getHTML=function(){return this.html};S.prototype.revealButton=function(){c.fillHTML(this.html,[c.makeButton("Continue",this.continueToNextTurn)])};S.prototype.continueToNextTurn=function(){t.showWorldScreen()};var D=function(a){this.run=a;this.html=c.makeDiv(["production-screen"]);this.refresh()};D.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),e=this.run.getResourceConversions().filter(function(a){return a.isFree()}),f=e.map(function(b){return a.renderConversion(b,
!0,!1)});b.applyConversions(e);var h=this.run.getResourceConversions().filter(function(a){return!a.isFree()});e=[];h=$jscomp.makeIterator(h);for(var k=h.next();!k.done;k=h.next())k=k.value,b.canAfford(k.inputs)&&b.hasEnoughWorkers(k.requiredWorkers)?(e.push(this.renderConversion(k,!0,!0)),b.applyConversions([k])):e.push(this.renderConversion(k,!1,!0));c.fillHTML(this.html,[c.makePara("Resource Production Report",["production-screen-label"]),c.makePara("Available workers at start of next production cycle: "+
this.run.inventory.getAvailableWorkers(),["production-screen-label"]),c.makePara("Resources available at start of next production cycle:",["production-screen-label"]),this.renderInventory(this.run.inventory),c.makePara("Resource generation in next production cycle:",["production-screen-label"]),c.makeDivContaining(f),c.makePara("Resource conversion in next production cycle:",["production-screen-label"]),c.makeDivContaining(e),c.makePara("Unused workers at end of next production cycle: "+b.getAvailableWorkers(),
["production-screen-label"]),c.makePara("Resources available at end of next production cycle:",["production-screen-label"]),this.renderInventory(b),c.makeButton("Back",function(){t.showWorldScreen()},["production-screen-back-button"])])};D.prototype.getHTML=function(){return this.html};D.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return c.makePara(a)});0==a.length&&a.push(c.makePara("(none)"));return c.makeDivContaining(a,["production-screen-inventory"])};D.prototype.renderConversion=
function(a,b,e){var d=this,f=c.makeDiv(["flex-horizontal"]),g=a.toString(),h="conversion-description-normal";a.enabled?b||(g="(cannot afford) "+a.toString(),h="conversion-description-cannot-afford"):(g="(disabled) "+a.toString(),h="conversion-description-disabled");f.appendChild(c.makeButton(g,function(){d.toggle(a)},[h,"conversion-description"]));e&&(f.appendChild(c.makeButton("Move Up",function(){return d.moveConversionUp(a)})),f.appendChild(c.makeButton("Move Down",function(){return d.moveConversionDown(a)})));
return f};D.prototype.moveConversionUp=function(a){this.run.increaseConversionPriority(a);this.refresh()};D.prototype.moveConversionDown=function(a){this.run.decreaseConversionPriority(a);this.refresh()};D.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};a=function(a,b){this.name=a;this.roles=b};var Z=[new a("Grace Rarer",["Team Lead","Gameplay Programmer"]),new a("Prindle",["DevOps"]),new a("May Lawver",["Programmer (HTML Composition Code)"])],aa=function(){};aa.render=function(){var a=
Z.map(function(a){return c.makePara(a.name,["credits-name"])}),b=Z.map(function(a){return c.makePara(a.roles.join(", "),["credits-roles"])});return c.makeDivContaining([c.makeHeader("Credits",1),c.makeDivContaining([c.makeDivContaining(a,["credits-names-column"]),c.makeDivContaining(b)],["credits-container"]),c.makeButton("Back",function(){return t.showMainMenu()})],["credits"])};var t=function(){};t.showMainMenu=function(){m();c.fillHTML(this.rootDiv,[r.renderMainMenu()])};t.showCredits=function(){m();
c.fillHTML(this.rootDiv,[aa.render()])};t.startGame=function(){this.currentRun=new B;this.showWorldScreen()};t.showWorldScreen=function(){var a=new L(this.currentRun);c.fillHTML(this.rootDiv,[a.getHTML()]);n(this.currentRun,a);document.onkeydown=function(b){a.handleKeyDown(b)}};t.showProductionScreen=function(){m();var a=new D(this.currentRun);c.fillHTML(this.rootDiv,[a.getHTML()])};t.transitionToNextTurn=function(){m();var a=new S;c.fillHTML(this.rootDiv,[a.getHTML()]);this.currentRun.completeTurn();
a.revealButton()};t.rootDiv=document.getElementById("rootdiv");window.onload=function(){console.log("Script Loaded");Promise.all(Y).then(function(){t.showMainMenu()})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 